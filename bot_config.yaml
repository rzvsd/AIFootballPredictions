# Odds placeholders (wire a feed later)
api_credentials:
  odds_url: "https://example.com/api/odds"
  bet_url: "https://example.com/api/bet"

# Betting Strategy Configuration
stake_size: 10.0
probability_threshold: 0.60  # legacy (unused by new engine)
edge_requirement: 0.05       # legacy (unused by new engine)
mode: sim  # sim or live

# Model Configuration
league: "E0"
fusion_weight_dc: 0.0 # Tuned: use pure XGB when DC adds no benefit

# xG source (Stage 4)
#   - macro: use MacroXG (form/Elo-based XGB)
#   - micro: use ShotXG aggregates (from data/enhanced/micro_agg.csv)
#   - blend: weighted blend of macro and micro
xg_source: micro
xg_blend_weight: 0.5
micro_agg_path: "data/enhanced/micro_agg.csv"

# Model dynamics (global defaults; tuned for E0)
half_life_matches: 5
elo_k: 15.0
elo_home_adv: 40.0
# Poisson tail trimming (0.0 disables)
tail_epsilon: 0.0

# Overdispersion head (Phase 2): NegBin performs best on E0
overdispersion:
  method: negbin
  k: 4.0

# Goal intervals to evaluate (inclusive ranges)
intervals:
  - [0, 3]
  - [1, 3]
  - [2, 4]
  - [2, 5]
  - [3, 6]

# Strategy toggles and thresholds
strategies:
  elo_fav:
    enabled: true
    min_prob: 0.52
    min_edge: 0.01
    min_odds: 1.6
    elo_gap: 40
  xg_ou:
    enabled: true
    min_prob: 0.57
    min_edge: 0.01
    min_odds: 1.6
    preferred_line: "2.5"
  tg_interval:
    enabled: true   # primarily sim; live odds rarely available
    min_prob: 0.40
    min_edge: 0.03
    min_odds: 1.6
  underdog_dc:
    enabled: true
    max_fav_prob: 0.60
    min_edge: 0.01
    min_odds: 1.4

# Tuned thresholds per market (from backtest)
thresholds:
  "1X2":
    min_prob: 0.50
    min_edge: 0.0
  "DC":
    min_prob: 0.70
    min_edge: 0.0
  "OU":
    min_prob: 0.57
    min_edge: 0.0
  "TG Interval":
    min_prob: 0.40
    min_edge: 0.0

# Optional: staking and logging
log_bets: false            # print-only for tests; set true in production
stake_policy: flat         # or "kelly"
kelly_fraction: 0.25       # used only if stake_policy = kelly

# Optional: per-league goal priors to blend into XGB means
# Set weight in [0,1]; 0 disables blending. mu_home/mu_away are league baseline expected goals.
league_priors:
  E0:
    mu_home: null
    mu_away: null
    weight: 0.0
  D1:
    mu_home: null
    mu_away: null
    weight: 0.0
  F1:
    mu_home: null
    mu_away: null
    weight: 0.0
  SP1:
    mu_home: null
    mu_away: null
    weight: 0.0
  I1:
    mu_home: null
    mu_away: null
    weight: 0.0

# Calibration shrinkage (stability): shrink calibrated probs toward neutral priors
calibration_shrink:
  oneX2: 0.10   # shrink toward 1/3 on each outcome
  ou25:  0.20   # shrink toward 50/50 on OU 2.5




